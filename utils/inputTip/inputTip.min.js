class InputTip{box;input;conf;options;constructor(t,i,e){if(this.input="string"==typeof t?document.querySelector(t):t,!this.input)return;this.conf=Array.isArray(i)?e||{}:i;let o=Array.isArray(i)?i:this.conf.options||[];this.init(o)}init(t){this.options=t,this.box=document.createElement("div"),this.box.className="input-tip-box",document.body.appendChild(this.box),this.input.addEventListener("focus",this.render.bind(this)),this.input.addEventListener("input",this.render.bind(this)),this.input.addEventListener("blur",(()=>setTimeout((()=>!this.box.contains(document.activeElement)&&this.toggle()),50))),this.input.addEventListener("keydown",(t=>{"Enter"===t.key?this.conf.onConfirm&&this.conf.onConfirm(this.input.value):"Escape"===t.key&&this.toggle()})),this.box.addEventListener("mousedown",(t=>{if(0===t.button&&t.target.classList.contains("tip-item")){if(setTimeout((()=>this.conf.onInput&&this.conf.onInput(this.input.value)),20),t.target.classList.contains("clr"))return this.input.value="";this.input.value=t.target.title||t.target.textContent,this.toggle()}})),this.render(this.options),this.toggle(),this.calcPos();const i=document.createElement("style");i.innerHTML=`.input-tip-box { position: absolute; background-color: white; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); z-index: 1000; border-radius: 4px; margin-top: 5px; max-width: 400px; display: none; font-size: 14px;}\n      .input-tip-box >div{ max-height: ${this.conf.maxHeight||200}px; overflow-y: auto;}\n      .input-tip-box > div::-webkit-scrollbar { width: 8px;  height: 8px; }\n      .input-tip-box > div::-webkit-scrollbar-thumb {  background-color: #ddd; border-radius: 6px; }\n      .tip-item{ padding: 6px 8px; cursor: pointer; border-bottom: 1px solid #eee; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}\n      .tip-item:last-of-type{ border-bottom: none;}\n      .tip-item:hover{ background-color: #f0f0f0;}\n      .tip-item.clr{ text-align: center; font-size: 0.8em; color: #E6A23C;}`,document.head.appendChild(i)}toggle(t){this.box.style.display=t?"block":"none"}render(t){const i=this.input.value.toLowerCase().trim();t=Array.isArray(t)?t:this.options.filter((t=>(t.value||t).toLowerCase().includes(i))),this.box.innerHTML="<div>"+t.map(((t,i)=>`<div class="tip-item" title="${t.value||t}">${t.label||t}</div>`)).join("")+"</div>"+(this.input.value&&'<div class="tip-item clr">清空输入</div>'),this.toggle(!0),this.calcPos()}calcPos(){const t=this.conf.maxHeight||200,i=this.input.getBoundingClientRect(),e=(window.innerHeight||document.documentElement.clientHeight)-i.bottom<t+40,o=window.scrollY||document.documentElement.scrollTop;this.box.style.top=`${i.top+o+(e?-10:i.height)}px`,this.box.style.left=`${i.left}px`,this.box.style.minWidth=`${i.width}px`,this.box.style.transform=`translateY(${e?"-100%":"0"})`}}