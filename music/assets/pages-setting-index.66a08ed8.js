import{_ as e,u as a,r as l,g as t,S as s,k as c,m as u,w as n,n as i,q as o,B as d,t as m,v as r,D as p,a1 as f,d as y,H as _,I as h,U as S,J as V}from"./index-9136df32.js";const b=e({__name:"index",setup(e){const b=a(),v=l(t("syncCode")||""),O=l({...s});async function g(){const{confirm:e}=await p({content:"确定要覆盖配置并重载吗？"});e&&(f("token_timestamp"),f("SESSION-TOKEN"),f("SONGS"),f("playList"),f("SINGERS"),Object.assign(s,O.value),y("SYS_CONFIG",O.value),_({url:"/pages/index/index"}))}let k=0;function x(){k++,5==k&&(h({title:"已开启同步歌词"}),y("syncLyric",!0))}async function C(){const{confirm:e}=await p({content:"确定要上传并覆盖配置吗？"});if(!e)return;if(!v.value||!v.value.trim())return h({title:"请输入同步编码"});y("syncCode",v.value);const a={},l=t("playList"),s=t("lyricTemp");l&&l.length&&(a.playList=l),s&&Object.keys(s).length&&(a.lyricTemp=s),S({url:"",method:"POST",data:JSON.stringify({type:"put",key:"dmusic:"+v.value,val:JSON.stringify(a)}),success:({data:e,statusCode:a,header:l})=>{h({title:"上传成功",icon:"success"})},fail:e=>{}})}async function L(){const{confirm:e}=await p({content:"确定要下载并覆盖配置吗？"});e&&(y("syncCode",v.value),S({url:"",method:"POST",data:JSON.stringify({type:"get",key:"dmusic:"+v.value}),success:({data:e,statusCode:a,header:l})=>{e.playList&&e.playList.length&&(y("playList",e.playList),b.backPlayList()),e.lyricTemp&&Object.keys(e.lyricTemp).length&&y("lyricTemp",e.lyricTemp),h({title:"下载成功",icon:"success"})},fail:e=>{}}))}return(e,a)=>{const l=i,t=V;return c(),u(l,{class:"container"},{default:n((()=>[o(l,{class:"form-item"},{default:n((()=>[o(l,{class:"label"},{default:n((()=>[o(l,{onClick:x},{default:n((()=>[d("同步列表")])),_:1})])),_:1}),o(t,{type:"text",modelValue:m(v),"onUpdate:modelValue":a[0]||(a[0]=e=>r(v)?v.value=e:null),placeholder:"同步编码, 建议3-6位, 姓名首字母"},null,8,["modelValue"])])),_:1}),o(l,{class:"form-item"},{default:n((()=>[o(l,{class:"btn",onClick:C},{default:n((()=>[d("上传")])),_:1}),o(l,{class:"btn",onClick:L},{default:n((()=>[d("下载")])),_:1})])),_:1}),o(l,{class:"hr"}),o(l,{class:"form-item"},{default:n((()=>[o(l,{class:"label"},{default:n((()=>[d("alist地址")])),_:1}),o(t,{type:"text",modelValue:m(O).baseApi,"onUpdate:modelValue":a[1]||(a[1]=e=>m(O).baseApi=e),placeholder:"alist地址, http://ip:port"},null,8,["modelValue"])])),_:1}),o(l,{class:"form-item"},{default:n((()=>[o(l,{class:"label"},{default:n((()=>[d("音乐路径")])),_:1}),o(t,{type:"text",modelValue:m(O).musicDir,"onUpdate:modelValue":a[2]||(a[2]=e=>m(O).musicDir=e),placeholder:"音乐根路径, /Local/Music"},null,8,["modelValue"])])),_:1}),o(l,{class:"form-item"},{default:n((()=>[o(l,{class:"label"},{default:n((()=>[d("用户名")])),_:1}),o(t,{type:"text",modelValue:m(O).username,"onUpdate:modelValue":a[3]||(a[3]=e=>m(O).username=e),placeholder:"用户名"},null,8,["modelValue"])])),_:1}),o(l,{class:"form-item"},{default:n((()=>[o(l,{class:"label"},{default:n((()=>[d("密码")])),_:1}),o(t,{type:"text",modelValue:m(O).password,"onUpdate:modelValue":a[4]||(a[4]=e=>m(O).password=e),placeholder:"密码"},null,8,["modelValue"])])),_:1}),o(l,{class:"form-item"},{default:n((()=>[o(l,{class:"btn",onClick:g},{default:n((()=>[d("保存")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-d96f70cc"]]);export{b as default};
